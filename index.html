<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>狼人殺</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      canvas {
        display: block;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <script>
      let canvas;
      let rectColor = "black";
      let playerNameInput, submitNameBtn, startGameBtn;

      let villagerCheckbox = [];
      let wolfCheckbox = [];
      let godCheckbox = [];

      let playerList = [];
      let gameState = 0;

      function setup() {
        canvas = createCanvas(windowWidth, windowHeight);
        canvas.position(0, 0);
        canvas.style("z-index", "-1");

        // input for landing page
        // gameState = 0
        playerNameInput = createInput();
        playerNameInput.position(width / 2 - playerNameInput.width/2, height * 1/20);

        submitNameBtn = createButton('Add');
        submitNameBtn.position(playerNameInput.x + playerNameInput.width + 10, playerNameInput.y);
        submitNameBtn.mousePressed(addPlayer);

        startGameBtn = createButton('開始');
        startGameBtn.position(width / 2 - startGameBtn.width/2, height * 19/20);

        // input for preparation page
        // gameState = 1
        for (i = 0; i < 10; i++) {
            villagerCheckbox = createCheckbox('廢村', false);
            villagerCheckbox.position(i*50, height / 2);
        }
      }

      function draw() {
        background("skyblue");

        text('game state: ' + gameState, 10, 10)
        text('player list: ' + playerList, 10, 20)

        if (gameState == 0) {
            for (i = 0; i < playerList.length; i++) {
                text(playerList[i], width / 2, playerNameInput.y + playerNameInput.height*1.2 + (i+1)*15);
            }
            text('遊玩人數： ' + playerList.length, width / 2, playerNameInput.height*1.2 + (playerList.length+1)*15+50);
            startGameBtn.position(width / 2 - startGameBtn.width/2, playerNameInput.height*1.2 + (playerList.length+1)*15+100);
            startGameBtn.mousePressed(startGame)
        } else if (gameState == 1) {
        }
      }

      function windowResized() {
        resizeCanvas(windowWidth, windowHeight);
      }

      function startGame() {
        gameState = 1;

        playerNameInput.remove();
        submitNameBtn.remove();
        startGameBtn.remove();
      }

      function addPlayer() {
        let playerName = playerNameInput.value();
        if (playerName !== '') {
            playerList.push(playerName);
            playerNameInput.value('');
        }
      }

      function drawRect() {
        rect(width/2, height/2, 50, 50);
      }
    </script>
  </head>
  <body>
  </body>
</html>
